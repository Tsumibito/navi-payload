# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò - –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

GitGuardian –æ–±–Ω–∞—Ä—É–∂–∏–ª —É—Ç–µ—á–∫—É –ø–∞—Ä–æ–ª—è PostgreSQL –≤ –≤–∞—à–µ–º –ø—É–±–ª–∏—á–Ω–æ–º GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ `Tsumibito/navi-payload`.

## ‚ö†Ô∏è –°–†–û–ß–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ!)

### 1. –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–£ –≤–∞—à–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Ö–æ—Å—Ç–∏–Ω–≥–∞ –ë–î:**
- –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î
- –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `navi_user`
- –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Ñ–∞–π–ª —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º

**–¢–µ–∫—É—â–∏–π –¥–æ—Å—Ç—É–ø (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è):**
```
Host: <–∞–¥—Ä–µ—Å_–ë–î>
User: <–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å>
Database: <–∏–º—è_–ë–î>
Schema: <—Å—Ö–µ–º–∞>
```

### 2. –û—á–∏—Å—Ç–∏—Ç–µ Git –∏—Å—Ç–æ—Ä–∏—é –æ—Ç –ø–∞—Ä–æ–ª–µ–π

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑—É—è BFG Repo-Cleaner (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ BFG
brew install bfg  # –¥–ª—è macOS

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
cat > passwords.txt << 'EOF'
<—Å—Ç–∞—Ä—ã–π_–ø–∞—Ä–æ–ª—å>
EOF

# 3. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–∞–∫ bare
git clone --mirror https://github.com/Tsumibito/navi-payload.git navi-payload-clean.git

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ BFG
cd navi-payload-clean.git
bfg --replace-text ../passwords.txt

# 5. –û—á–∏—Å—Ç–∏—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ
git reflog expire --expire=now --all && git gc --prune=now --aggressive
git push --force
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ò—Å–ø–æ–ª—å–∑—É—è git-filter-repo

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ git-filter-repo
brew install git-filter-repo  # –¥–ª—è macOS

# 2. –í –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
cd /Users/al1/Navi/CascadeProjects/windsurf-project/navi-payload

# 3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∑–∞–º–µ–Ω—ã
cat > replacements.txt << 'EOF'
<—Å—Ç–∞—Ä—ã–π_–ø–∞—Ä–æ–ª—å>==><REMOVED_PASSWORD>
postgresql://navi_user:<—Å—Ç–∞—Ä—ã–π_–ø–∞—Ä–æ–ª—å>@==>postgresql://navi_user:<REMOVED_PASSWORD>@
EOF

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
git filter-repo --replace-text replacements.txt --force

# 5. –î–æ–±–∞–≤—å—Ç–µ remote –æ–±—Ä–∞—Ç–Ω–æ (filter-repo –µ–≥–æ —É–¥–∞–ª—è–µ—Ç)
git remote add origin https://github.com/Tsumibito/navi-payload.git

# 6. Force push (–í–ù–ò–ú–ê–ù–ò–ï: –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é!)
git push --force --all
git push --force --tags
```

#### –í–∞—Ä–∏–∞–Ω—Ç –í: –£–¥–∞–ª–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

```bash
# 1. –ù–∞ GitHub: Settings ‚Üí Delete this repository
# 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π navi-payload
# 3. –í –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ:
cd /Users/al1/Navi/CascadeProjects/windsurf-project/navi-payload
rm -rf .git
git init
git add .
git commit -m "Initial commit (cleaned)"
git remote add origin https://github.com/Tsumibito/navi-payload.git
git push -u origin main
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å –ø–∞—Ä–æ–ª—è–º–∏:

```bash
# –ü–æ–∏—Å–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Å—Ç—Ä–æ–∫
grep -r "password" --include="*.ts" --include="*.js" --include="*.json" .
grep -r "secret" --include="*.ts" --include="*.js" --include="*.json" .
grep -r "token" --include="*.ts" --include="*.js" --include="*.json" .
```

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–∞—â–∏—Ç—É –Ω–∞ –±—É–¥—É—â–µ–µ

#### –ê. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .gitignore –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–§–∞–π–ª `.gitignore` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `.env*`, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
cat .gitignore | grep env
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `.env*`

#### –ë. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pre-commit hook

–°–æ–∑–¥–∞–π—Ç–µ `.git/hooks/pre-commit`:

```bash
#!/bin/bash
if git diff --cached --name-only | grep -E "\.env"; then
  echo "‚ùå –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å .env —Ñ–∞–π–ª!"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–∞—Ä–æ–ª–∏ –≤ –∫–æ–¥–µ
if git diff --cached | grep -E "(password|secret|token).*=.*['\"]"; then
  echo "‚ö†Ô∏è  –í–Ω–∏–º–∞–Ω–∏–µ: –Ω–∞–π–¥–µ–Ω—ã –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ!"
  echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º."
fi
```

–°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```bash
chmod +x .git/hooks/pre-commit
```

#### –í. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ git-secrets (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
brew install git-secrets

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
cd /Users/al1/Navi/CascadeProjects/windsurf-project/navi-payload
git secrets --install
git secrets --register-aws

# –î–æ–±–∞–≤—å—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
git secrets --add 'postgres://[^:]+:[^@]+@'
git secrets --add 'postgresql://[^:]+:[^@]+@'
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] –ü–∞—Ä–æ–ª–µ–π –ë–î –∏–∑–º–µ–Ω—ë–Ω —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- [ ] `.env` –æ–±–Ω–æ–≤–ª—ë–Ω —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
- [ ] Git –∏—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞ –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ –ø–∞—Ä–æ–ª—è
- [ ] Force push –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ GitHub
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –¥—Ä—É–≥–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω pre-commit hook –∏–ª–∏ git-secrets
- [ ] GitGuardian —É–≤–µ–¥–æ–º–ª—ë–Ω –æ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫—Ç–æ –º–æ–≥ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–Ω–∏:

```sql
-- –ï—Å–ª–∏ –≤–∞—à –ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
SELECT * FROM pg_stat_activity 
WHERE datname = 'postgres' 
ORDER BY backend_start DESC;
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitGuardian

–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–π–¥–∏—Ç–µ –Ω–∞ https://dashboard.gitguardian.com –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∞–ª–µ—Ä—Ç –∑–∞–∫—Ä—ã—Ç.

## ‚ö†Ô∏è –í–ê–ñ–ù–û

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
1. **–í—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏** –¥–æ–ª–∂–Ω—ã —Å–¥–µ–ª–∞—Ç—å fresh clone —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. **–ù–ï –¥–µ–ª–∞–π—Ç–µ** merge —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ç–æ–∫ –±–µ–∑ rebase
3. **–°–æ–æ–±—â–∏—Ç–µ –∫–æ–º–∞–Ω–¥–µ** –æ —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è –ë–î

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—á–∏—Å—Ç–∫–æ–π –∏—Å—Ç–æ—Ä–∏–∏:
- GitHub Support: https://support.github.com
- GitGuardian: https://dashboard.gitguardian.com
